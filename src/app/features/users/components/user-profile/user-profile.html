<div class="profile-data-container">

    <!-- Profile Header -->
    <personal-header [profileHeader]="profileHeader" [isEditing]="false" [showCode]="true" />

    <div class="mt-3"></div>

    <!-- Profile Tabs -->
    <personal-tabs [tabs]="tabs" (activeTabChange)="onActiveTabChange($event)" />

    <!-- Profile Content -->
    <p-card class="profile-tabs-card">

        @if(activeTab === 'users.formTitle') {
        <div class="d-flex justify-content-between header-title">
            <h5>{{ 'users.formTitle' | translate }}</h5>

            <edit-icon-button *ngIf="!disablePage && permissionService.canEdit.user" (click)="onEditUser()"
                [showOutline]="true" />
        </div>

        <div class="contact-info student-personals-grp">

            <div class="personal-activity">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-user"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.name' | translate }}</h4>
                    <h5>{{user.name}}</h5>
                </div>
            </div>

            <div class="personal-activity" *ngIf="user.gender">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-venus-mars"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.gender' | translate }}</h4>
                    <h5>{{getGender(user.gender!)}}</h5>
                </div>
            </div>

            <div class="personal-activity" *ngIf="user.birthDate">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-calendar-alt"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.birthDate' | translate }}</h4>
                    <h5>{{getDate(user.birthDate!)}}</h5>
                </div>
            </div>

            <div class="personal-activity" *ngIf="user.phone">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-phone"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.phoneNumber' | translate }}</h4>
                    <h5>{{user.phone}}</h5>
                </div>
            </div>

            <div class="personal-activity" *ngIf="user.email">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-envelope"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.email' | translate }}</h4>
                    <h5><a href="mailto:{{user.email}}">{{user.email}}</a></h5>
                </div>
            </div>

            <div class="personal-activity" >
                <div class="personal-icons">
                    <i class="fas fa-solid fa-calendar-alt"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.joinedDate' | translate }}</h4>
                    <h5 *ngIf="!disablePage">{{getDate(user.joinedDate!)}}</h5>
                </div>
            </div>

            <div class="personal-activity">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-user-tag"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'familyRelations.one' | translate }}</h4>
                    <h5>{{ getRelation(user.relation!) }}</h5>
                </div>
            </div>

        </div>
        }

        @if(activeTab === 'shared.tabs.comingVisits') {
        <div class="d-flex justify-content-between header-title">
            <h5 class="mb-2">{{ 'shared.tabs.comingVisits' | translate }}</h5>
        </div>

        <div class="tab-section-container auto-hover-scroll">
            <div class="tab-overflow-auto" *ngIf="visits && visits.length > 0">
                <app-table [columns]="visitsColumns" [rows]="visits" />
            </div>
        </div>

        <no-data [icon]="'fas fa-calendar-alt'" *ngIf="!visits || visits.length === 0"
            [text]="'shared.noData.noComingVisits' | translate" />
        }


        @if(activeTab === 'shared.tabs.attachments') {
            <div class="d-flex justify-content-between header-title">
                <h5 class="mb-2">{{ 'shared.tabs.attachments' | translate }}</h5>
            </div>
    
            <div class="tab-section-container auto-hover-scroll">
                <div class="tab-overflow-auto" *ngIf="visits && visits.length > 0">
                    <app-table [columns]="visitsColumns" [rows]="visits" />
                </div>
            </div>
    
            <no-data [icon]="'fas fa-paperclip'" *ngIf="!visits || visits.length === 0"
                [text]="'shared.noData.noAttachments' | translate" />
            }
    
    </p-card>

</div>

<!-- Edit User Dialog -->
@if(showEditInfoDialog) {
<app-user-form [showDialog]="showEditInfoDialog" [user]="user" (onSave)="reloadUser()"
    (onCancel)="onCloseEditDialog()" />
}

<!-- User Attachment Dialog -->
@if(showUserAttachmentDialog) {
<!-- Add user attachment dialog component here -->
}
