<div class="profile-data-container">

    <!-- Profile Header -->
    <personal-header [profileHeader]="profileHeader" [isEditing]="false" />

    <div class="mt-3"></div>

    <!-- Profile Tabs -->
    <personal-tabs [tabs]="tabs" (activeTabChange)="onActiveTabChange($event)" />

    <!-- Profile Content -->
    <p-card class="profile-tabs-card">

        @if(activeTab === 'families.formTitle') {
        <div class="d-flex justify-content-between header-title">
            <h5>{{ 'families.formTitle' | translate }}</h5>

            <edit-icon-button *ngIf="!disablePage && permissionService.canEdit.family" (click)="onEditFamily()"
                [showOutline]="true" />
        </div>

        <div class="contact-info student-personals-grp">

            <div class="personal-activity">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-house-user"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'families.familyName' | translate }}</h4>
                    <h5>{{family.familyName}}</h5>
                </div>
            </div>

            <div class="personal-activity">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-user"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'families.familyResponsible' | translate }}</h4>
                    <h5>{{family.familyResponsible.name}}</h5>
                </div>
            </div>

            <div class="personal-activity" *ngIf="permissionService.canEdit.family">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-phone"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.phoneNumber' | translate }}</h4>
                    <h5>{{family.familyResponsible.phoneNumber}}</h5>
                </div>
            </div>

            <div class="personal-activity">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-envelope"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.email' | translate }}</h4>
                    <h5><a href="mailto:{{family.familyResponsible.email}}">{{family.familyResponsible.email}}</a></h5>
                </div>
            </div>

            <div class="personal-activity" *ngIf="permissionService.canEdit.family">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-calendar-alt"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'shared.labels.joinedDate' | translate }}</h4>
                    <h5 *ngIf="!disablePage">{{getDate(family.joinedDate!)}}</h5>
                </div>
            </div>

            <div class="personal-activity">
                <div class="personal-icons">
                    <i class="fas fa-solid fa-users"></i>
                </div>
                <div class="views-personal">
                    <h4>{{ 'families.membersNumber' | translate }}</h4>
                    <h5>{{family.membersNumber}}</h5>
                </div>
            </div>

        </div>
        }

        @if(activeTab === 'families.familyMembers') {
        <div class="d-flex justify-content-between header-title">
            <h5 class="mb-2">{{ 'families.familyMembers' | translate }}</h5>
        </div>

        <div class="tab-section-container auto-hover-scroll">
            <div class="tab-overflow-auto" *ngIf="family.familyResponsible">
                <app-table [columns]="membersColumns" [rows]="family.familyMembers" />
            </div>
        </div>

        <no-data [icon]="'fas fa-users'" *ngIf="!family.familyResponsible"
            [text]="'shared.noData.noMembers' | translate" />
        }

        @if(activeTab === 'shared.tabs.comingVisits') {

        <div class="d-flex justify-content-between header-title">
            <h5 class="mb-2">{{ 'shared.tabs.comingVisits' | translate }}</h5>
        </div>

        <div class="tab-section-container auto-hover-scroll">
            <div class="tab-overflow-auto" *ngIf="family.familyResponsible">
                <app-table [columns]="visitsColumns" [rows]="visits" />
            </div>
        </div>

        <no-data [icon]="'fas fa-calendar-alt'" 
            [text]="'shared.noData.noComingVisits' | translate" />
        }

    </p-card>

</div>

<app-family-form [showDialog]="showEditInfoDialog" [family]="family" (onSave)="reloadFamily()"
    (onCancel)="onCloseEditDialog()" />