<!-- Family Form Dialog -->
<dialog-buttons [header]="'families.formTitle' | translate" [showDialog]="showDialog" [showSaveButton]="true"
    (onSave)="hasId() ? update() : save()" (onCancel)="cancel()" [saveDisabled]="!(familyForm!.valid)"
    [width]="'45rem'">

    <form *ngIf="familyForm" [formGroup]="familyForm" (ngSubmit)="hasId() ? update() : save()">

        <!-- Family Information Section -->
        <div class="row">
            <!-- Family Responsible Name -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <input-label [label]="'families.familyResponsible' | translate"
                    [disabled]="!(permissionService.canEdit.family)" [required]="true"
                    [formControl]="getFormControl('familyResponsible')" />
            </div>

            <!-- Family Name (Auto-generated) -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <input-label [label]="'families.familyName' | translate" [disabled]="true" [required]="true"
                    [formControl]="getFormControl('familyName')" />
            </div>
        </div>

        <!-- Personal Information Section -->
        <div class="row">
            <!-- Gender -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <dropdown [label]="'shared.labels.gender' | translate" [required]="true" [options]="genderOptions"
                    [formControl]="getFormControl('gender')"
                    [disabled]="!(permissionService.canEdit.family)" />
            </div>

            <!-- Birth Date -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <label-date-picker [label]="'shared.labels.birthDate' | translate"
                    [disabled]="!(permissionService.canEdit.family)"
                    [formControl]="getFormControl('birthDate')" />
            </div>
        </div>

        <!-- Contact Information Section -->
        <div class="row">
            <!-- Phone Number -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <input-label [label]="'shared.labels.phoneNumber' | translate"
                    [disabled]="!(permissionService.canEdit.family)" [required]="true"
                    [formControl]="getFormControl('phoneNumber')" />
            </div>

            <!-- Email -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <input-label [label]="'shared.labels.email' | translate"
                    [disabled]="!(permissionService.canEdit.family)" [required]="true"
                    [formControl]="getFormControl('email')" />
            </div>
        </div>

        <!-- Security Information Section -->
        <div class="row">
            <!-- Password -->
            <div class="col-md-6 col-12 flex items-center gap-2 mb-2">
                <input-label [label]="'shared.labels.password' | translate" [required]="requiredPassword"
                    [formControl]="getFormControl('password')" />
            </div>

            <!-- Confirm Password -->
            <div class="col-md-6 col-12 flex flex-col gap-2 mb-2">
                <input-label [label]="'shared.labels.confirmPassword' | translate" [required]="requiredPassword"
                    [formControl]="getFormControl('confirmPassword')" />

                <!-- Password Mismatch Error Message -->
                <div *ngIf="passwordMismatch" class="text-danger text-sm mt-1">
                    {{ 'shared.validation.passwordMismatch' | translate }}
                </div>
            </div>
        </div>

    </form>

</dialog-buttons>